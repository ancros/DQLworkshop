{"version":"6","defaultTimeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}},"sections":[{"id":"21ecea6e-3e64-4e6d-b4ab-556dbdbb9287","type":"markdown","markdown":"## Sumarizacion y segmentacion\n* El comando **SUMMARIZE** agrupa logs que tienen los mismos valores para un campo determinado y los agrega.\n* También puede establecer nombres de alias para atributos dentro del comando de resumen.\n* El comando **MAKETIMESERIES** crea una serie temporal a partir de los datos de la secuencia. Proporciona una manera conveniente de representar gráficamente datos no métricos sin procesar (como eventos o logs) a lo largo del tiempo.\n\n## Ejercicio 1\n1. Cuente el número de logs por `loglevel`.\n2. Cuente el número de logs por `loglevel` y cambie el nombre/alias del archivo a \"level\"\n3. Cuente la cantidad de logs por `loglevel` en cada host, eliminando los `loglevel` de tipo \"NONE\"\n4. Visualice la cantidad de logs de tipo ERROR en el campo`loglevel`  a lo largo del tiempo.\n5. Visualice la cantidad de logs de cada `loglevel` a lo largo del tiempo.\n6. Visualice la cantidad de logs de cada `loglevel` a lo largo del tiempo con intervalos de 5 minutos."},{"id":"6cb50b33-ea96-46c6-8144-1823a55ef7d2","type":"dql","title":"Ejercicio 1.1 - Logs por loglevel","showTitle":false,"height":256,"state":{"input":{"value":"fetch logs\n| summarize count=count(), by:{loglevel}","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"loglevel","categoryAxisLabel":"loglevel","valueAxis":"count","valueAxisLabel":"count"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"firstVisibleRowIndex":0,"columnWidths":{}}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"recordView","state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"result":{"value":{"records":[{"loglevel":"DEBUG","count":"5920"},{"loglevel":"ERROR","count":"5275"},{"loglevel":"INFO","count":"185093"},{"loglevel":"NONE","count":"41546"},{"loglevel":"WARN","count":"5943"}],"metadata":{"grail":{"canonicalQuery":"fetch logs\n| summarize by:{loglevel}, count(), alias:count","timezone":"America/New_York","query":"fetch logs\n| summarize count=count(), by:{loglevel}","scannedRecords":341118,"dqlVersion":"V1_0","scannedBytes":499397263,"analysisTimeframe":{"start":"2023-12-19T13:45:21.447Z","end":"2023-12-19T14:15:21.447Z"},"locale":"","executionTimeMilliseconds":152,"notifications":[],"queryId":"8eb6b436-ef33-4b30-a3f6-8e16e0abc4f9","sampled":false}},"types":[{"mappings":{"loglevel":{"type":"string"},"count":{"type":"long"}},"indexRange":[0,4]}]},"code":200,"notifications":[],"dateTime":"2023-12-19T14:15:21.446Z","input":{"value":"fetch logs\n| summarize count=count(), by:{loglevel}","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}}}}},{"id":"31fa8848-0fe5-4c36-8e64-f7b8756e7424","type":"dql","title":"Ejercicio 1.2 - Logs por nivel con Alias","showTitle":false,"height":256,"state":{"input":{"value":"fetch logs\n| summarize count=count(), by:{level=loglevel}","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"level","categoryAxisLabel":"level","valueAxis":"count","valueAxisLabel":"count"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"firstVisibleRowIndex":0,"columnWidths":{}}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"recordView","state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"result":{"value":{"records":[{"level":"DEBUG","count":"5904"},{"level":"ERROR","count":"5264"},{"level":"INFO","count":"184907"},{"level":"NONE","count":"41495"},{"level":"WARN","count":"5927"}],"metadata":{"grail":{"canonicalQuery":"fetch logs\n| summarize by:{loglevel, alias:level}, count(), alias:count","timezone":"America/New_York","query":"fetch logs\n| summarize count=count(), by:{level=loglevel}","scannedRecords":341118,"dqlVersion":"V1_0","scannedBytes":499397263,"analysisTimeframe":{"start":"2023-12-19T13:45:25.095Z","end":"2023-12-19T14:15:25.095Z"},"locale":"","executionTimeMilliseconds":168,"notifications":[],"queryId":"40d1e8c5-40f9-499c-a37c-39c95dbd014a","sampled":false}},"types":[{"mappings":{"level":{"type":"string"},"count":{"type":"long"}},"indexRange":[0,4]}]},"code":200,"notifications":[],"dateTime":"2023-12-19T14:15:25.094Z","input":{"value":"fetch logs\n| summarize count=count(), by:{level=loglevel}","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}}}}},{"id":"e84228fd-dd4c-44db-9df2-d7961ccbb38d","type":"dql","title":"Ejercicio 1.3 - Logs por nivel y host, eliminando logs de tipo NONE","showTitle":false,"height":284,"state":{"input":{"value":"fetch logs\n| filterOut loglevel == \"NONE\"\n| summarize count = count(), by:{loglevel,host.name}","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"loglevel","categoryAxisLabel":"loglevel","valueAxis":"count","valueAxisLabel":"count"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"firstVisibleRowIndex":0,"columnWidths":{}}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table","state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"result":{"code":200,"value":{"records":[{"loglevel":"DEBUG","host.name":"ip-10-0-0-38.us-west-2.compute.internal","count":"5918"},{"loglevel":"ERROR","host.name":"ip-10-0-0-163.us-west-2.compute.internal","count":"12"},{"loglevel":"ERROR","host.name":"ip-10-0-0-225.us-west-2.compute.internal","count":"1493"},{"loglevel":"ERROR","host.name":"ip-10-0-0-38.us-west-2.compute.internal","count":"3720"},{"loglevel":"INFO","host.name":"ip-10-0-0-163.us-west-2.compute.internal","count":"115520"},{"loglevel":"INFO","host.name":"ip-10-0-0-225.us-west-2.compute.internal","count":"2069"},{"loglevel":"INFO","host.name":"ip-10-0-0-38.us-west-2.compute.internal","count":"68051"},{"loglevel":"WARN","host.name":"ip-10-0-0-163.us-west-2.compute.internal","count":"2"},{"loglevel":"WARN","host.name":"ip-10-0-0-225.us-west-2.compute.internal","count":"27"},{"loglevel":"WARN","host.name":"ip-10-0-0-38.us-west-2.compute.internal","count":"5920"}],"metadata":{"grail":{"canonicalQuery":"fetch logs\n| filter isFalseOrNull(loglevel == \"NONE\")\n| summarize by:{loglevel, host.name}, count(), alias:count","timezone":"America/New_York","query":"fetch logs\n| filterOut loglevel == \"NONE\"\n| summarize count = count(), by:{loglevel,host.name}","scannedRecords":913767,"dqlVersion":"V1_0","scannedBytes":544538556,"analysisTimeframe":{"start":"2023-12-20T18:58:18.256Z","end":"2023-12-20T19:28:18.256Z"},"locale":"","executionTimeMilliseconds":214,"notifications":[],"queryId":"218fbe71-7c3a-4cbf-b917-f351648a7fff","sampled":false}},"types":[{"mappings":{"loglevel":{"type":"string"},"host.name":{"type":"string"},"count":{"type":"long"}},"indexRange":[0,9]}]},"notifications":[],"dateTime":"2023-12-20T19:28:18.255Z","input":{"value":"fetch logs\n| filterOut loglevel == \"NONE\"\n| summarize count = count(), by:{loglevel,host.name}","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}}}}},{"id":"d09cbbad-16eb-45a7-b99f-b2e2dc5e52dd","type":"dql","title":"Ejercicio 1.4 - Logs de tipo ERROR sobre el tiempo","showTitle":false,"state":{"input":{"value":"fetch logs\n|filter loglevel == \"ERROR\"\n|makeTimeseries errorcount = count()","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"firstVisibleRowIndex":0,"columnWidths":{}}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"barChart","state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"result":{"code":200,"value":{"records":[{"timeframe":{"start":"2023-12-19T13:36:00.000Z","end":"2023-12-19T14:07:00.000Z"},"interval":"60000000000","errorcount":[89,184,191,181,188,175,200,190,191,180,187,192,189,195,169,189,188,177,182,184,180,184,205,174,179,184,187,190,164,21,1]}],"metadata":{"grail":{"canonicalQuery":"fetch logs\n| filter loglevel == \"ERROR\"\n| makeTimeseries count(), alias:errorcount","timezone":"America/New_York","query":"fetch logs\n|filter loglevel == \"ERROR\"\n|makeTimeseries errorcount = count()","scannedRecords":263414,"dqlVersion":"V1_0","scannedBytes":35648567,"analysisTimeframe":{"start":"2023-12-19T13:36:30.874Z","end":"2023-12-19T14:06:30.874Z"},"locale":"","executionTimeMilliseconds":22,"notifications":[],"queryId":"7c84417a-8ff5-4894-a580-dd4d51df7e86","sampled":false}},"types":[{"mappings":{"timeframe":{"type":"timeframe"},"interval":{"type":"duration"},"errorcount":{"type":"array","types":[{"mappings":{"element":{"type":"double"}},"indexRange":[0,30]}]}},"indexRange":[0,0]}]},"notifications":[],"dateTime":"2023-12-19T14:06:30.873Z","input":{"value":"fetch logs\n|filter loglevel == \"ERROR\"\n|makeTimeseries errorcount = count()","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}}}}},{"id":"fc72cb42-4493-4b66-95e3-63669f622148","type":"dql","title":"Ejercicio 1.5 - Logs por loglelvel sobre el tiempo","showTitle":false,"state":{"input":{"value":"fetch logs\n|makeTimeseries count(), by:{loglevel}","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"firstVisibleRowIndex":0,"columnWidths":{}}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"barChart","state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"result":{"code":200,"value":{"records":[{"timeframe":{"start":"2023-12-19T13:36:00.000Z","end":"2023-12-19T14:07:00.000Z"},"interval":"60000000000","loglevel":"DEBUG","count()":[84,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,170,null]},{"timeframe":{"start":"2023-12-19T13:36:00.000Z","end":"2023-12-19T14:07:00.000Z"},"interval":"60000000000","loglevel":"ERROR","count()":[76,184,191,181,188,175,200,190,191,180,187,192,189,195,169,189,188,177,182,184,180,184,205,174,179,184,187,190,164,21,1]},{"timeframe":{"start":"2023-12-19T13:36:00.000Z","end":"2023-12-19T14:07:00.000Z"},"interval":"60000000000","loglevel":"INFO","count()":[3766,6532,6294,6413,6234,6444,6388,6425,6565,6109,6503,6350,6471,6468,6181,6582,6308,6351,6465,6424,6354,6397,6249,6531,6273,6520,6486,6261,4048,2097,20]},{"timeframe":{"start":"2023-12-19T13:36:00.000Z","end":"2023-12-19T14:07:00.000Z"},"interval":"60000000000","loglevel":"NONE","count()":[386,1512,1515,1307,1523,1329,1425,1511,1398,1399,1442,1414,1511,1495,1281,1523,1425,1352,1501,1445,1450,1566,1528,1372,1508,1409,1433,1518,1244,475,69]},{"timeframe":{"start":"2023-12-19T13:36:00.000Z","end":"2023-12-19T14:07:00.000Z"},"interval":"60000000000","loglevel":"WARN","count()":[84,200,201,200,202,200,202,201,200,200,202,200,201,201,201,200,202,201,200,200,202,200,203,200,200,200,201,201,200,171,null]}],"metadata":{"grail":{"canonicalQuery":"fetch logs\n| makeTimeseries by:{loglevel}, count()","timezone":"America/New_York","query":"fetch logs\n|makeTimeseries count(), by:{loglevel}","scannedRecords":263414,"dqlVersion":"V1_0","scannedBytes":482944143,"analysisTimeframe":{"start":"2023-12-19T13:36:34.338Z","end":"2023-12-19T14:06:34.338Z"},"locale":"","executionTimeMilliseconds":144,"notifications":[],"queryId":"cfdb7c4f-2add-4f8e-90c7-22ed2a85d471","sampled":false}},"types":[{"mappings":{"timeframe":{"type":"timeframe"},"interval":{"type":"duration"},"loglevel":{"type":"string"},"count()":{"type":"array","types":[{"mappings":{"element":{"type":"double"}},"indexRange":[0,30]}]}},"indexRange":[0,4]}]},"notifications":[],"dateTime":"2023-12-19T14:06:34.337Z","input":{"value":"fetch logs\n|makeTimeseries count(), by:{loglevel}","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}}}}},{"id":"fa36b1e4-d96b-44a1-881a-2f64f740ca4c","type":"dql","title":"Ejercicio 1.6 - Logs por loglevel sobre el tiempo en intervalos de 5 minutos","showTitle":false,"state":{"input":{"value":"fetch logs\n|makeTimeseries count(), by:{loglevel}, interval:5m","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"firstVisibleRowIndex":0,"columnWidths":{}}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"barChart","state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"result":{"code":200,"value":{"records":[{"timeframe":{"start":"2023-12-19T13:35:00.000Z","end":"2023-12-19T14:10:00.000Z"},"interval":"300000000000","loglevel":"DEBUG","count()":[670,1000,1000,1000,1000,1000,170]},{"timeframe":{"start":"2023-12-19T13:35:00.000Z","end":"2023-12-19T14:10:00.000Z"},"interval":"300000000000","loglevel":"ERROR","count()":[614,944,943,905,927,904,22]},{"timeframe":{"start":"2023-12-19T13:35:00.000Z","end":"2023-12-19T14:10:00.000Z"},"interval":"300000000000","loglevel":"INFO","count()":[22806,32056,31901,31887,31955,29588,2117]},{"timeframe":{"start":"2023-12-19T13:35:00.000Z","end":"2023-12-19T14:10:00.000Z"},"interval":"300000000000","loglevel":"NONE","count()":[4626,7186,7261,7082,7361,7112,544]},{"timeframe":{"start":"2023-12-19T13:35:00.000Z","end":"2023-12-19T14:10:00.000Z"},"interval":"300000000000","loglevel":"WARN","count()":[671,1005,1004,1004,1005,1002,171]}],"metadata":{"grail":{"canonicalQuery":"fetch logs\n| makeTimeseries by:{loglevel}, interval:5m, count()","timezone":"America/New_York","query":"fetch logs\n|makeTimeseries count(), by:{loglevel}, interval:5m","scannedRecords":263414,"dqlVersion":"V1_0","scannedBytes":482944143,"analysisTimeframe":{"start":"2023-12-19T13:36:39.023Z","end":"2023-12-19T14:06:39.023Z"},"locale":"","executionTimeMilliseconds":146,"notifications":[],"queryId":"20a83069-9d4c-4ada-b46f-67b2a0aeddc8","sampled":false}},"types":[{"mappings":{"timeframe":{"type":"timeframe"},"interval":{"type":"duration"},"loglevel":{"type":"string"},"count()":{"type":"array","types":[{"mappings":{"element":{"type":"double"}},"indexRange":[0,6]}]}},"indexRange":[0,4]}]},"notifications":[],"dateTime":"2023-12-19T14:06:39.022Z","input":{"value":"fetch logs\n|makeTimeseries count(), by:{loglevel}, interval:5m","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}}}}},{"id":"70dd5e42-1ae1-48b9-a8e7-021b54559d31","type":"markdown","markdown":"## Ordenar resultados con ordenar y limitar resultados\n* De forma predeterminada, el comando **SORT** ordena los logs en orden ascendente.\n* También podemos limitar el número de resultados con el comando **LIMIT**.\n\n## Ejercicio 2\n1. Quiero ver los logs de errores más recientes. Muestra los últimos 5 logs de errores (orden descendente) en los últimos 30 minutos."},{"id":"5f592f4f-0e6f-4670-aca3-191cc2c2d570","type":"dql","showTitle":false,"title":"Ejercicio 2.1 - Ultimos 5 logs de errores","state":{"input":{"value":"fetch logs\n| filter loglevel == \"ERROR\"\n| sort timestamp desc\n| limit 5","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["content"]],"firstVisibleRowIndex":0,"columnWidths":{}}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table","state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"result":{"code":200,"value":{"records":[{"timestamp":"2023-12-19T09:06:00.000000000-05:00","content":"Dec 19 14:06:00 ip-10-0-0-225 kubelet: E1219 14:06:00.018439    3531 pod_workers.go:1300] \"Error syncing pod, skipping\" err=\"failed to \\\"StartContainer\\\" for \\\"currencyservice\\\" with CrashLoopBackOff: \\\"back-off 5m0s restarting failed container=currencyservice pod=currencyservice-bc84d79d9-p9r9w_hipstershop(c9263a57-4b1b-4516-a2e1-5641f0c97a75)\\\"\" pod=\"hipstershop/currencyservice-bc84d79d9-p9r9w\" podUID=\"c9263a57-4b1b-4516-a2e1-5641f0c97a75\"","dt.entity.host":"HOST-CD9076CE2003B3F5","dt.entity.process_group":"PROCESS_GROUP-EF1E81586EB8EDD6","dt.entity.process_group_instance":"PROCESS_GROUP_INSTANCE-EE36ACD895920813","dt.process.name":"Linux System","dt.security_context":"5be88a61-7363-45ac-a1c3-6198d359485e","dt.source_entity":"PROCESS_GROUP_INSTANCE-EE36ACD895920813","event.type":"LOG","host.name":"ip-10-0-0-225.us-west-2.compute.internal","log.source":"/var/log/messages","loglevel":"ERROR","status":"ERROR","OperatorVersion":"v0.14.1"},{"timestamp":"2023-12-19T09:05:46.000000000-05:00","content":"Dec 19 14:05:46 ip-10-0-0-225 kubelet: E1219 14:05:46.018797    3531 pod_workers.go:1300] \"Error syncing pod, skipping\" err=\"failed to \\\"StartContainer\\\" for \\\"currencyservice\\\" with CrashLoopBackOff: \\\"back-off 5m0s restarting failed container=currencyservice pod=currencyservice-bc84d79d9-p9r9w_hipstershop(c9263a57-4b1b-4516-a2e1-5641f0c97a75)\\\"\" pod=\"hipstershop/currencyservice-bc84d79d9-p9r9w\" podUID=\"c9263a57-4b1b-4516-a2e1-5641f0c97a75\"","dt.entity.host":"HOST-CD9076CE2003B3F5","dt.entity.process_group":"PROCESS_GROUP-EF1E81586EB8EDD6","dt.entity.process_group_instance":"PROCESS_GROUP_INSTANCE-EE36ACD895920813","dt.process.name":"Linux System","dt.security_context":"5be88a61-7363-45ac-a1c3-6198d359485e","dt.source_entity":"PROCESS_GROUP_INSTANCE-EE36ACD895920813","event.type":"LOG","host.name":"ip-10-0-0-225.us-west-2.compute.internal","log.source":"/var/log/messages","loglevel":"ERROR","status":"ERROR","OperatorVersion":"v0.14.1"},{"timestamp":"2023-12-19T09:05:33.000000000-05:00","content":"Dec 19 14:05:33 ip-10-0-0-225 kubelet: E1219 14:05:33.019635    3531 pod_workers.go:1300] \"Error syncing pod, skipping\" err=\"failed to \\\"StartContainer\\\" for \\\"currencyservice\\\" with CrashLoopBackOff: \\\"back-off 5m0s restarting failed container=currencyservice pod=currencyservice-bc84d79d9-p9r9w_hipstershop(c9263a57-4b1b-4516-a2e1-5641f0c97a75)\\\"\" pod=\"hipstershop/currencyservice-bc84d79d9-p9r9w\" podUID=\"c9263a57-4b1b-4516-a2e1-5641f0c97a75\"","dt.entity.host":"HOST-CD9076CE2003B3F5","dt.entity.process_group":"PROCESS_GROUP-EF1E81586EB8EDD6","dt.entity.process_group_instance":"PROCESS_GROUP_INSTANCE-EE36ACD895920813","dt.process.name":"Linux System","dt.security_context":"5be88a61-7363-45ac-a1c3-6198d359485e","dt.source_entity":"PROCESS_GROUP_INSTANCE-EE36ACD895920813","event.type":"LOG","host.name":"ip-10-0-0-225.us-west-2.compute.internal","log.source":"/var/log/messages","loglevel":"ERROR","status":"ERROR","OperatorVersion":"v0.14.1"},{"timestamp":"2023-12-19T09:05:21.000000000-05:00","content":"Dec 19 14:05:21 ip-10-0-0-225 kubelet: E1219 14:05:21.025855    3531 pod_workers.go:1300] \"Error syncing pod, skipping\" err=\"failed to \\\"StartContainer\\\" for \\\"currencyservice\\\" with CrashLoopBackOff: \\\"back-off 5m0s restarting failed container=currencyservice pod=currencyservice-bc84d79d9-p9r9w_hipstershop(c9263a57-4b1b-4516-a2e1-5641f0c97a75)\\\"\" pod=\"hipstershop/currencyservice-bc84d79d9-p9r9w\" podUID=\"c9263a57-4b1b-4516-a2e1-5641f0c97a75\"","dt.entity.host":"HOST-CD9076CE2003B3F5","dt.entity.process_group":"PROCESS_GROUP-EF1E81586EB8EDD6","dt.entity.process_group_instance":"PROCESS_GROUP_INSTANCE-EE36ACD895920813","dt.process.name":"Linux System","dt.security_context":"5be88a61-7363-45ac-a1c3-6198d359485e","dt.source_entity":"PROCESS_GROUP_INSTANCE-EE36ACD895920813","event.type":"LOG","host.name":"ip-10-0-0-225.us-west-2.compute.internal","log.source":"/var/log/messages","loglevel":"ERROR","status":"ERROR","OperatorVersion":"v0.14.1"},{"timestamp":"2023-12-19T09:05:16.855000000-05:00","content":"ERROR:root:HTTPConnectionPool(host='jaeger-collector.microservices-demo', port=9411): Max retries exceeded with url: /api/v2/spans (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f08034a4590>: Failed to establish a new connection: [Errno -2] Name or service not known',))","dt.entity.cloud_application":"CLOUD_APPLICATION-81074808D9F98F5D","dt.entity.cloud_application_instance":"CLOUD_APPLICATION_INSTANCE-76384AEB40634415","dt.entity.cloud_application_namespace":"CLOUD_APPLICATION_NAMESPACE-8819FB19476A7442","dt.entity.container_group":"CONTAINER_GROUP-1192FDFEA3654264","dt.entity.container_group_instance":"CONTAINER_GROUP_INSTANCE-2D7A1A6A48BADB3F","dt.entity.host":"HOST-CD9076CE2003B3F5","dt.entity.kubernetes_cluster":"KUBERNETES_CLUSTER-26DCF46868DFE830","dt.entity.kubernetes_node":"KUBERNETES_NODE-49AC0D17226C2857","dt.entity.process_group":"PROCESS_GROUP-417118CDE9543C09","dt.entity.process_group_instance":"PROCESS_GROUP_INSTANCE-905E7A750FD49AB5","dt.kubernetes.cluster.name":"dynakube","dt.kubernetes.node.system_uuid":"ec28cf0f-d1f8-549a-da08-8c8e5a40c59f","dt.process.name":"python* recommendationservice-*","dt.security_context":"5be88a61-7363-45ac-a1c3-6198d359485e","dt.source_entity":"PROCESS_GROUP_INSTANCE-905E7A750FD49AB5","event.type":"LOG","host.name":"ip-10-0-0-225.us-west-2.compute.internal","k8s.container.name":"recommendationservice","k8s.deployment.name":"recommendationservice-*","k8s.namespace.name":"hipstershop","k8s.pod.name":"recommendationservice-54bfd6b8c6-sdxxb","k8s.pod.uid":"ed54b4b4-bd4b-4d20-ba01-b37c1ff850d4","log.source":"/var/log/pods/hipstershop_recommendationservice-54bfd6b8c6-sdxxb_ed54b4b4-bd4b-4d20-ba01-b37c1ff850d4/recommendationservice/#.log","loglevel":"ERROR","process.technology":["Containerd","Python"],"status":"ERROR","OperatorVersion":"v0.14.1","k8s.node.name":"ip-10-0-0-225.us-west-2.compute.internal","log.iostream":"stderr"}],"metadata":{"grail":{"canonicalQuery":"fetch logs\n| filter loglevel == \"ERROR\"\n| sort timestamp, direction:\"descending\"\n| limit 5","timezone":"America/New_York","query":"fetch logs\n| filter loglevel == \"ERROR\"\n| sort timestamp desc\n| limit 5","scannedRecords":263414,"dqlVersion":"V1_0","scannedBytes":25617914,"analysisTimeframe":{"start":"2023-12-19T13:36:43.610Z","end":"2023-12-19T14:06:43.610Z"},"locale":"","executionTimeMilliseconds":17,"notifications":[],"queryId":"05997ae6-719a-4092-b89c-edf4f635f0bc","sampled":false}},"types":[{"mappings":{"timestamp":{"type":"timestamp"},"content":{"type":"string"},"dt.entity.host":{"type":"string"},"dt.entity.process_group":{"type":"string"},"dt.entity.process_group_instance":{"type":"string"},"dt.process.name":{"type":"string"},"dt.security_context":{"type":"string"},"dt.source_entity":{"type":"string"},"event.type":{"type":"string"},"host.name":{"type":"string"},"log.source":{"type":"string"},"loglevel":{"type":"string"},"status":{"type":"string"},"OperatorVersion":{"type":"string"}},"indexRange":[0,3]},{"mappings":{"timestamp":{"type":"timestamp"},"content":{"type":"string"},"dt.entity.cloud_application":{"type":"string"},"dt.entity.cloud_application_instance":{"type":"string"},"dt.entity.cloud_application_namespace":{"type":"string"},"dt.entity.container_group":{"type":"string"},"dt.entity.container_group_instance":{"type":"string"},"dt.entity.host":{"type":"string"},"dt.entity.kubernetes_cluster":{"type":"string"},"dt.entity.kubernetes_node":{"type":"string"},"dt.entity.process_group":{"type":"string"},"dt.entity.process_group_instance":{"type":"string"},"dt.kubernetes.cluster.name":{"type":"string"},"dt.kubernetes.node.system_uuid":{"type":"string"},"dt.process.name":{"type":"string"},"dt.security_context":{"type":"string"},"dt.source_entity":{"type":"string"},"event.type":{"type":"string"},"host.name":{"type":"string"},"k8s.container.name":{"type":"string"},"k8s.deployment.name":{"type":"string"},"k8s.namespace.name":{"type":"string"},"k8s.pod.name":{"type":"string"},"k8s.pod.uid":{"type":"string"},"log.source":{"type":"string"},"loglevel":{"type":"string"},"process.technology":{"type":"array","types":[{"mappings":{"element":{"type":"string"}},"indexRange":[0,1]}]},"status":{"type":"string"},"OperatorVersion":{"type":"string"},"k8s.node.name":{"type":"string"},"log.iostream":{"type":"string"}},"indexRange":[4,4]}]},"notifications":[],"dateTime":"2023-12-19T14:06:43.609Z","input":{"value":"fetch logs\n| filter loglevel == \"ERROR\"\n| sort timestamp desc\n| limit 5","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-07T19:05:34.446Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-07T19:35:34.446Z"}}}}}}}]}