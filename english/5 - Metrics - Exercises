{"version":"6","defaultTimeframe":{"from":"now-7d","to":"now","details":{"from":{"type":"expression","normalized":"now-7d","date":"2023-12-14T14:49:25.710Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-21T14:49:25.710Z"}}},"sections":[{"id":"23556987-d686-4f35-82f5-938f1b06a230","type":"markdown","markdown":"## Metrics on Grail\n* Metrics on Grail enable you to pinpoint and retrieve any metric data with the help of DQL. \n* Metrics can be trended, analyzed, and even forecasted with Davis AI!\n* [Metrics on Grail Example](https://docs.dynatrace.com/docs/shortlink/metrics-on-grail-examples)\n* [List of Metics on Grail](https://docs.dynatrace.com/docs/shortlink/built-in-metrics-on-grail) or select SUPPORTED IN GRAIL on the metrics screen\n![](https://github.com/JasonOstroski/perform-hot24-intro-to-dql/blob/main/images/metricsongrail.jpg?raw=true)"},{"id":"931c2906-6306-410b-ad43-b84f6d51fa3e","type":"markdown","markdown":"# Exercise 1\n1. Fetch CPU load timeseries metric by host"},{"id":"fa07dbe1-8376-4e8b-8587-9e55054fc057","type":"dql","showTitle":false,"title":"Exercise 1.1 - Fetch CPU load timeseries metric by host","state":{"input":{"value":"","timeframe":{"from":"now-2h","to":"now"}},"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"colorThresholdTarget":"value","showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}}},{"id":"d818c0eb-0c35-4a68-9e44-7c5562d9d438","type":"markdown","markdown":"# Exercise 2\n1. Find the average timeseries for \"process cpu usage\"\n2. Filter by entity process group and entity host\n3. Use Davis forecasting to predict the trend in time\n4. Pull data from data explorer and use it in DQL\n5. Use tags in filters"},{"id":"095613c2-1a17-45ed-a1d4-19d6a8942274","type":"dql","showTitle":false,"title":"Exercise 2.1 - Find the average timeseries for \"process cpu usage\"","state":{"input":{"value":"","timeframe":{"from":"now-7d","to":"now","details":{"from":{"type":"expression","normalized":"now-7d","date":"2023-12-14T14:49:25.710Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-21T14:49:25.710Z"}}}},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"colorThresholdTarget":"value","showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}}},{"id":"6c68fd3e-5fc6-4d4f-a938-5e0146d5a272","type":"dql","showTitle":false,"title":"Exercise 2.2 - Filter on Process group and Host","state":{"input":{"value":"","timeframe":{"from":"now-7d","to":"now","details":{"from":{"type":"expression","normalized":"now-7d","date":"2023-12-14T14:49:25.710Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-21T14:49:25.710Z"}}}},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"colorThresholdTarget":"value","showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}}},{"id":"115f5f55-1f79-4495-8650-28b8d5f9a664","type":"dql","showTitle":false,"title":"Exercise 2.3 - Use Davis forecasting to predict the trend in time","drilldownPath":[],"state":{"input":{"value":"","timeframe":{"from":"now-7d","to":"now","details":{"from":{"type":"expression","normalized":"now-7d","date":"2023-11-22T16:05:13.818Z"},"to":{"type":"expression","normalized":"now","date":"2023-11-29T16:05:13.818Z"}}}},"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true},"enabled":false,"componentState":{"selectedAnalyzerName":"dt.statistics.ui.ForecastAnalyzer","inputData":{"dt.statistics.ui.ForecastAnalyzer":{"query":"","generalParameters":{"resolveDimensionalQueryData":true,"logVerbosity":"INFO","timeframe":{"startTime":"now-7d","endTime":"now"}}}},"resultState":{},"lastExecution":{"analyzerName":"dt.statistics.ui.ForecastAnalyzer","inputData":{"dt.statistics.ui.ForecastAnalyzer":{"query":"","generalParameters":{"resolveDimensionalQueryData":true,"logVerbosity":"INFO","timeframe":{"startTime":"now-7d","endTime":"now"}}}}},"analyzerHints":{}}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"categorical"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"state":"idle"}},{"id":"1d78dd9f-1c22-4431-b1d9-436f60eacdd7","type":"markdown","markdown":"## Exercise 2.4\n* Navigate to the data explorer and paste the below metric expression in advanced mode\n```builtin:host.cpu.usage:avg:splitBy(\"dt.entity.host\"):filter(and(in(\"dt.entity.host\",entitySelector(\"type(host)\"))))```\n* Open with Notebook to build the DQL from the metric expression\n![](https://github.com/JasonOstroski/perform-hot24-intro-to-dql/blob/main/images/dataexplorer.jpg?raw=true)"},{"id":"09243614-79fa-4328-94b2-ae652591c8b1","type":"dql","showTitle":false,"title":"Exercise 2.4","state":{"input":{"value":"","timeframe":{"from":"now-2h","to":"now","details":{"from":{"type":"expression","normalized":"now-2h","date":"2023-11-17T17:17:18.675Z"},"to":{"type":"expression","normalized":"now","date":"2023-11-17T19:17:18.675Z"}}}},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"colorThresholdTarget":"value","showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}}},{"id":"e8b7853a-05e7-414f-95c4-88a711db3aba","type":"markdown","markdown":"## Exercise 2.5\n* Navigate to data explorer and graph \"CPU Usage %\", split by HOST, Filter by host tag: [AWS]deployed_with:terraform\n* Open with... Notebooks and choose your Metrics notebook\n"},{"id":"8e9e2cc5-ff2a-44d9-abca-66713f9fef43","type":"dql","showTitle":false,"title":"Exercise 2.5","state":{"input":{"value":"","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-12-19T20:51:08.122Z"},"to":{"type":"expression","normalized":"now","date":"2023-12-19T21:21:08.122Z"}}}},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"colorThresholdTarget":"value","showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}}},{"id":"ea6769ba-e3f9-40b5-8c97-0ca85ec9d0ab","type":"markdown","markdown":"# Exercise 3\n1. Explore Metrics in Notebook tile!"},{"id":"7640c4ef-bd5e-4ef7-83ec-181ddeb25c88","type":"dql","title":"Explore metrics","showTitle":true,"queryConfig":{"version":"9.0.1","subQueries":[{"id":"A","isEnabled":true,"filters":{},"datatype":"metrics","metric":{"key":"dt.host.cpu.iowait","aggregation":"avg"},"by":[]}]},"state":{"input":{"value":"timeseries avg(dt.host.cpu.iowait)","timeframe":{"from":"now-7d","to":"now","details":{"from":{"type":"expression","normalized":"now-7d","date":"2023-11-22T16:05:13.818Z"},"to":{"type":"expression","normalized":"now","date":"2023-11-29T16:05:13.818Z"}}}},"davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"colorThresholdTarget":"value","showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle","querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}}}]}